{"version":3,"file":"js/182.ee1fc795.js","mappings":"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","sources":["webpack://vuejs_mytick8.com/./src/store/user.js","webpack://vuejs_mytick8.com/./src/components/Auth.vue","webpack://vuejs_mytick8.com/./src/components/Auth.vue?4730"],"sourcesContent":["import { defineStore } from \"pinia\";\r\n\r\n\r\nexport const useUserStore = defineStore('user', {\r\n    state: () => {\r\n        return {\r\n            user: JSON.parse(localStorage.getItem('user')) || {\r\n                name: '',\r\n                family: '',\r\n                mobile: '',\r\n            },\r\n            token: localStorage.getItem('token') || '',\r\n            q: ''\r\n        }\r\n    },\r\n    getters: {\r\n        getUser(state) {\r\n            return state.user\r\n        },\r\n        getToken(state) {\r\n            return state.token\r\n        },\r\n        getExpiresAt(state) {\r\n            return state.expires_at\r\n        },\r\n        getQ(state) {\r\n            return state.q\r\n        },\r\n        isAuth(state) {\r\n            let token = state.token;\r\n            return token\r\n        },\r\n    },\r\n    actions: {\r\n        setUser(user) {\r\n            this.user = user\r\n            localStorage.setItem('user', JSON.stringify(user));\r\n\r\n        },\r\n        setToken(token) {\r\n            this.token = token\r\n            localStorage.setItem('token', token);\r\n        },\r\n        setExpiresAt(expires_at) {\r\n            this.expires_at = expires_at\r\n            localStorage.setItem('expires_at', expires_at);\r\n        },\r\n        logout() {\r\n            this.user = ''\r\n            this.token = ''\r\n            localStorage.removeItem('user')\r\n            localStorage.removeItem('token')\r\n        },\r\n        setQ(q) {\r\n            this.q = q\r\n        }\r\n    }\r\n})","<template>\r\n    <section id=\"sign\">\r\n        <div class=\"container\">\r\n            <div class=\"d-flex justify-content-center align-items-center\">\r\n                <div class=\"sign__wrapper\">\r\n                    <div class=\"sign__header d-flex flex-column justify-content-between border-0 p-3\">\r\n                        <div class=\"align-self-end\">\r\n                            <span class=\"sign__header--sign-up\">عضویت</span>\r\n                            <span class=\"sign__header--slash mx-1\">/</span>\r\n                            <span class=\"sign__header--sign-in sign__header--active\">ورود</span>\r\n                        </div>\r\n                        <img src=\"../assets/images/logo-white.svg\" alt=\"\" class=\"sign__header--logo\" width=\"169px\"\r\n                            height=\"43px\">\r\n                    </div>\r\n                    <div class=\"sign__up\">\r\n                        <div class=\"d-flex mb-3\">\r\n                            <div class=\"form__control\">\r\n                                <label for=\"fname\" class=\"form__control-label\">نام*</label>\r\n                                <input type=\"text\" v-model.lazy=\"name\" class=\"form__control-input\"\r\n                                    placeholder=\"لطفا نام خود را وارد کنید\">\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"d-flex\">\r\n                            <div class=\"form__control\">\r\n                                <label for=\"lname\" class=\"form__control-label\">نام خانوادگی*</label>\r\n                                <input type=\"text\" v-model.lazy=\"registerData.family\" class=\"form__control-input\"\r\n                                    placeholder=\"لطفا نام خانوادگی خود را وارد کنید\">\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"sign__in mb-3\">\r\n                        <div class=\"d-flex flex-column mb-2\">\r\n                            <div class=\"d-flex\">\r\n                                <div class=\"form__control\">\r\n                                    <label for=\"telephone\" class=\"form__control-label\">شماره موبایل*</label>\r\n                                    <input type=\"tel\" v-model.lazy=\"registerData.mobile\" autocomplete=\"off\"\r\n                                        class=\"form__control-input\" placeholder=\"۰۹xxxxxxxxx مثال\">\r\n\r\n                                </div>\r\n                                <!-- <button :disabled=\"showTimer\" type=\"button\" @click=\"getToken\" -->\r\n                                <button type=\"button\" @click=\"getToken\" class=\"sign__in--confirm-number\">\r\n                                    <div v-if=\"tokenLoading\" class=\"spinner-border  spinner-border-sm\"></div>\r\n                                    <span v-else>تایید</span>\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"d-flex flex-column\">\r\n                            <div class=\"form__control\">\r\n                                <label for=\"password\" class=\"form__control-label form__control-password\">کد تایید شماره\r\n                                    موبایل*</label>\r\n                                <input type=\"password\" v-model.lazy=\"registerData.token\" class=\"form__control-input\"\r\n                                    autocomplete=\"off\" placeholder=\"xxxxxx\">\r\n                            </div>\r\n                            <p v-show=\"showTimer\" class=\"sign--waitingtime ps-2\"></p>\r\n                            <p v-show=\"resendCode\" class=\"sign--waitingtime ps-2\">\r\n                            <div class=\"d-flex justify-content-between align-items-center\">\r\n                                <span>زمان استفاده از کد به پایان رسید </span>\r\n                                <button @click.prevent=\"getToken()\" class=\"resend-otp-code\">ارسال مجدد کد تایید</button>\r\n                            </div>\r\n                            </p>\r\n                        </div>\r\n                        <div class=\"d-flex flex-column\">\r\n                            <div class=\"form__control\">\r\n                                <label class=\"form__control-label\" style=\"position:relative;top:0;right:0;\">منو به خاطر\r\n                                    بسپار</label>\r\n                                <input type=\"checkbox\" v-model=\"registerData.remember_me\">\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"d-flex justify-content-between align-items-center position-relative\">\r\n                        <button type=\"submit\" @click.prevent=\"doLogin($event)\"\r\n                            class=\"sign-btn sign-in--btn sign-btn--active\">\r\n                            <div class=\"spinner-border spinner-border-sm\" v-if=\"signInLoading\"></div>\r\n                            <span v-else>ورود</span>\r\n                        </button>\r\n                        <button type=\"submit\" :disabled=\"registerLoading\" @click.prevent=\"doRegister($event)\"\r\n                            class=\"sign-btn sign-up--btn sign-btn--deactive\">\r\n                            <div class=\" spinner-border spinner-border-sm\" v-if=\"registerLoading\"></div>\r\n                            <span v-else>عضویت</span>\r\n                        </button>\r\n                    </div>\r\n                    <div v-if=\"Object.keys(errors).length > 0\">\r\n                        <ul class=\"mt-5 alert alert-danger\">\r\n                            <li style=\"font-size: 11px;\" v-if=\"Object.hasOwn(errors, 'name')\" class=\"text-danger\">{{\r\n                                errors.name.shift() }}</li>\r\n                            <li style=\"font-size: 11px;\" v-if=\"Object.hasOwn(errors, 'family')\" class=\"text-danger\">{{\r\n                                errors.family.shift() }}</li>\r\n                            <li style=\"font-size: 11px;\" class=\"text-danger\" v-if=\"Object.hasOwn(errors, 'mobile')\">{{\r\n                                errors.mobile.shift() }}</li>\r\n                            <li style=\"font-size: 11px;\" class=\"text-danger\" v-if=\"Object.hasOwn(errors, 'token')\">{{\r\n                                errors.token.shift() }}</li>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </section>\r\n</template>\r\n<script setup>\r\nimport { reactive, ref, computed } from 'vue'\r\nimport authApi from '@/axios/api'\r\nimport { useToast } from \"vue-toastification\";\r\nimport { useRouter } from \"vue-router\";\r\nimport { useUserStore } from '../store/user'\r\nimport { useHead } from '@vueuse/head'\r\nimport { handleError } from '@/utils/helpers';\r\nuseHead({\r\n    title: computed(() => 'صفحه ورود و عضویت'),\r\n})\r\nconst userStore = useUserStore()\r\nconst router = useRouter()\r\nconst toast = useToast();\r\nlet signInLoading = ref(false)\r\nlet registerLoading = ref(false)\r\nlet tokenLoading = ref(false)\r\nlet showTimer = ref(false)\r\nlet resendCode = ref(false)\r\nlet name = ref('')\r\nlet registerData = reactive({\r\n    name: '',\r\n    family: '',\r\n    mobile: '',\r\n    token: '',\r\n    remember_me: true\r\n})\r\nlet errors = {}\r\nasync function getToken() {\r\n    tokenLoading.value = true;\r\n    try {\r\n        const response = await authApi.post(`/send/token`, {\r\n            mobile: registerData.mobile\r\n        });\r\n\r\n        tokenLoading.value = false\r\n\r\n        if (response.data.status == 'success') {\r\n            showTimer.value = true;\r\n            resendCode.value = false\r\n            if (document.querySelector('.sign--waitingtime')) {\r\n                // Initial countdown time in seconds (3 minutes)\r\n                let countdownTime = 20;\r\n                // Variable to store the interval for updating the countdown\r\n                let countdownInterval;\r\n                // Get the countdown element and the sign-in button\r\n                const countdownElement = document.querySelector('.sign--waitingtime');\r\n                // Function to update the countdown display\r\n                let updateCountdown = () => {\r\n                    // Calculate minutes and seconds\r\n                    const minutes = Math.floor(countdownTime / 60);\r\n                    const seconds = countdownTime % 60;\r\n\r\n                    // Convert English numbers to Persian numbers\r\n                    const persianMinutes = convertToPersianNumber(String(minutes));\r\n                    const persianSeconds = convertToPersianNumber(String(seconds));\r\n                    // Format the time as \"MM:SS\"\r\n                    const formattedTime = `${persianMinutes.padStart(2, '۰')}:${persianSeconds.padStart(2, '۰')}`;\r\n                    // Update the countdown text\r\n                    if (countdownTime >= 0) {\r\n                        countdownElement.textContent = `${formattedTime} تا انقضای کد`;\r\n                        // Enable the submit button during the countdown\r\n                        // signInButton.disabled = false; \r\n                    } else {\r\n                        // Stop the interval when the countdown reaches zero\r\n                        clearInterval(countdownInterval);\r\n                        showTimer.value = false\r\n                        resendCode.value = true\r\n                    }\r\n                    // Decrease the countdown time\r\n                    countdownTime--;\r\n                }\r\n                // Function to convert English numbers to Persian numbers\r\n                function convertToPersianNumber(number) {\r\n                    return number.replace(/[0-9]/g, function (v) {\r\n                        return String.fromCharCode(v.charCodeAt(0) + 1728);\r\n                    });\r\n                }\r\n                // Initial call to update the countdown display\r\n                updateCountdown();\r\n\r\n                // Start the countdown interval (updates every second)\r\n                countdownInterval = setInterval(updateCountdown, 1000);\r\n            }\r\n            toast.success(response.data.message, {\r\n                timeout: 2000\r\n            });\r\n        }\r\n    } catch (err) {\r\n        tokenLoading.value = false\r\n        toast.error(handleError(err).join(', '), {\r\n            timeout: 2000\r\n        });\r\n    }\r\n}\r\nasync function doLogin(e) {\r\n    if ($(e.currentTarget).hasClass(\"sign-btn--deactive\")) {\r\n        $(\".sign__header--sign-in\").addClass(\"sign__header--active\");\r\n        $(\".sign__header--sign-up\").removeClass(\"sign__header--active\");\r\n        $(\".sign__up\").removeClass(\"sign__up--active\");\r\n        $(\".sign-in--btn\").removeClass(\"sign-btn--deactive\");\r\n        $(\".sign-in--btn\").addClass(\"sign-btn--active\");\r\n        $(\".sign-up--btn\").removeClass(\"sign-btn--active\");\r\n        $(\".sign-up--btn\").addClass(\"sign-btn--deactive\");\r\n    }\r\n    signInLoading.value = true;\r\n\r\n    try {\r\n        const response = await authApi.post(`/login/with/token`, {\r\n            mobile: registerData.mobile,\r\n            token: registerData.token\r\n        });\r\n\r\n        signInLoading.value = false\r\n        if (response.data.status == 'success') {\r\n            toast.success(response.data.message, {\r\n                timeout: 2000\r\n            });\r\n            userStore.setUser(response.data.data.user);\r\n            userStore.setToken(response.data.data.token);\r\n            router.push({ name: 'panel_index' })\r\n        }\r\n    } catch (err) {\r\n        signInLoading.value = false\r\n        \r\n        toast.error(handleError(err).join(', '), {\r\n            timeout: 2000\r\n        });\r\n    }\r\n}\r\nasync function doRegister(e) {\r\n    if ($(e.currentTarget).hasClass(\"sign-btn--deactive\")) {\r\n        $(\".sign__header--sign-in\").removeClass(\"sign__header--active\");\r\n        $(\".sign__header--sign-up\").addClass(\"sign__header--active\");\r\n        $(\".sign__up\").addClass(\"sign__up--active\");\r\n        $(\".sign-in--btn\").removeClass(\"sign-btn--active\");\r\n        $(\".sign-in--btn\").addClass(\"sign-btn--deactive\");\r\n        $(\".sign-up--btn\").removeClass(\"sign-btn--deactive\");\r\n        $(\".sign-up--btn\").addClass(\"sign-btn--active\");\r\n    }\r\n    registerLoading.value = true;\r\n    errors = {}\r\n    try {\r\n        const response = await authApi.post(`register`, {\r\n            mobile: registerData.mobile,\r\n            token: registerData.token,\r\n            name: registerData.name,\r\n            family: registerData.family,\r\n        });\r\n\r\n        registerLoading.value = false\r\n        if (response.data.status) {\r\n            toast.success(response.data.message, {\r\n                timeout: 2000\r\n            });\r\n            userStore.setUser(response.data.user);\r\n            userStore.setToken(response.data.token);\r\n            router.push({ name: 'panel_index' })\r\n        } else {\r\n            toast.warning(response.data.message, {\r\n                timeout: 2000\r\n            });\r\n        }\r\n    } catch (err) {\r\n        registerLoading.value = false\r\n        if (err.response.status == 422) {\r\n            errors = err.response.data.errors\r\n        } else {\r\n            toast.error(err.response.data.message, {\r\n                timeout: 2000\r\n            });\r\n        }\r\n    }\r\n}\r\n</script>","import script from \"./Auth.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Auth.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["useUserStore","defineStore","state","user","JSON","parse","localStorage","getItem","name","family","mobile","token","q","getters","getUser","getToken","getExpiresAt","expires_at","getQ","isAuth","actions","setUser","this","setItem","stringify","setToken","setExpiresAt","logout","removeItem","setQ","useHead","title","computed","userStore","router","useRouter","toast","useToast","signInLoading","ref","registerLoading","tokenLoading","showTimer","resendCode","registerData","reactive","remember_me","errors","async","value","response","authApi","post","data","status","document","querySelector","countdownInterval","countdownTime","countdownElement","updateCountdown","minutes","Math","floor","seconds","persianMinutes","convertToPersianNumber","String","persianSeconds","formattedTime","padStart","textContent","clearInterval","number","replace","v","fromCharCode","charCodeAt","setInterval","success","message","timeout","err","error","handleError","join","doLogin","e","$","currentTarget","hasClass","addClass","removeClass","push","doRegister","warning","__exports__"],"sourceRoot":""}