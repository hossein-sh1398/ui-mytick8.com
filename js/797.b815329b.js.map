{"version":3,"file":"js/797.b815329b.js","mappings":"msCAwEA,IAAIA,GAAUC,EAAAA,EAAAA,KAAI,GAElB,MAAMC,GAAQC,EAAAA,EAAAA,MAERC,GAAQC,EAAAA,EAAAA,MACd,IAAIC,GAASL,EAAAA,EAAAA,IAAI,CAAC,GACdM,GAAON,EAAAA,EAAAA,IAAI,CAAC,GAChBO,eAAeC,IACX,IACIT,EAAQU,OAAQ,EAChB,IAAIC,EAAM,oBAAsBT,EAAMU,OAAOC,OAE7C,MAAMC,QAAiBC,EAAAA,EAAQC,IAAIL,GAC/BG,EAASG,KAAKC,QACdZ,EAAOI,MAAQI,EAASG,KAAKX,OAC7BC,EAAKG,MAAQI,EAASG,KAAKV,MAC3BY,EAAAA,EAAAA,GAAQ,CAEJC,OAAOC,EAAAA,EAAAA,KAAS,IAAO,yBAAwBf,EAAOO,cAG1DT,EAAMkB,QAAQR,EAASG,KAAKM,QAAS,CACjCC,QAAS,KAGrB,CAAE,MAAOC,GACLrB,EAAMsB,MAAMD,EAAIX,SAASG,KAAKM,QAAS,CACnCC,QAAS,KAGjB,CAAE,QACExB,EAAQU,OAAQ,CACpB,CACJ,CAEAF,eAAemB,IACX,IACI3B,EAAQU,OAAQ,EAChB,IAAIC,EAAM,oBAAsBT,EAAMU,OAAOC,OAE7C,MAAMC,QAAiBC,EAAAA,EAAQa,KAAKjB,GAChCG,EAASG,KAAKC,OACY,UAAtBJ,EAASG,KAAKY,MACdvB,EAAOI,MAAQI,EAASG,KAAKX,OAC7BF,EAAM0B,QAAQhB,EAASG,KAAKM,QAAS,CACjCC,QAAS,OAGbO,SAASC,OAAOlB,EAASG,KAAKN,MAGlCsB,QAAQC,IAAIpB,EAASG,MACrBb,EAAMkB,QAAQR,EAASG,KAAKM,QAAS,CACjCC,QAAS,MAGrB,CAAE,MAAOC,GACLrB,EAAMsB,MAAMD,EAAIX,SAASG,KAAKM,QAAS,CACnCC,QAAS,KAGjB,CAAE,QACExB,EAAQU,OAAQ,CACpB,CACJ,C,OA9BAD,I,irDCvGA,MAAM0B,EAAc,EAEpB,O","sources":["webpack://vuejs_mytick8.com/./src/components/pages/PaymentFactor.vue","webpack://vuejs_mytick8.com/./src/components/pages/PaymentFactor.vue?1d70"],"sourcesContent":["<template>\r\n    <div id=\"breadcrumb\" class=\"my-4 pb-3\">\r\n        <div class=\"container\">\r\n            <nav>\r\n                <ol class=\"breadcrumb\">\r\n                    <li class=\"breadcrumb-item\"><router-link :to=\"{name:'home'}\">برنامه ها</router-link></li>\r\n                    <li class=\"breadcrumb-item active\" aria-current=\"page\">مشاهده فاکتور</li>\r\n                </ol>\r\n            </nav>\r\n        </div>\r\n    </div>\r\n    <div class=\"container\">\r\n        <div class=\"row mb-3\">\r\n            <div  class=\"col-md-6 offset-3 text-center\">\r\n                <div v-if=\"loading\" class=\"spinner-border\"></div>\r\n                <div class=\"card\" v-else>\r\n                    <template v-if=\"factor.id\">\r\n                        <div class=\"card-header d-flex justify-content-between align-items-center\">\r\n                            <div class=\"cart-title\">\r\n                                فاکتور شماره : {{ factor.number }}\r\n                            </div>\r\n                            <div class=\"cart-title\">\r\n                                تاریخ ایجاد : {{ factor.created_at_persian }}\r\n                            </div>\r\n                            <div>\r\n                                <span :class=\"['badge', factor.is_paid ? 'bg-success' : 'bg-danger']\">{{ factor.is_paid ? 'پرداخت شده' : 'پرداخت نشده' }}</span>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"card-body text-start\">\r\n                            <div class=\"mb-3 d-flex justify-content-between align-items-center\">\r\n                                <p class=\"card-text\">\r\n                                    صاحب فاکتور: {{ user.name + ' ' + user.family }}\r\n                                </p>\r\n                                <p class=\"card-text\">\r\n                                    شماره تلفن: {{ user.mobile }}\r\n                                </p>\r\n                            </div>\r\n                            <p class=\"card-text\">\r\n                                <span v-if=\"!factor.is_paid\"> مبلغ قابل پرداخت : {{ factor.total }} تومان</span>\r\n                                <span v-else>مبلغ پرداخت شده : {{ factor.total }} تومان</span>\r\n                            </p>\r\n                            <p class=\"card-text\">\r\n                                بابت، {{ factor.description }}\r\n                            </p>\r\n                            <p class=\"card-text mt-3\" v-if=\"factor.is_paid\">\r\n                                تاریخ پرداخت :{{ factor.transaction_time }}\r\n                            </p>\r\n\r\n                        </div>\r\n                        <form method=\"post\" v-if=\"!factor.is_paid\">\r\n                            <div class=\"card-footer\">\r\n                                <button type=\"submit\" @click.prevent=\"payment()\" class=\"select-info__part--submit btn d-block w-100 border-0 p-2\">پرداخت</button>\r\n                            </div>\r\n                        </form>\r\n                        <div v-else class=\"card-footer\">\r\n                            <p class=\"cart-title text-end\">\r\n                                از پرداخت شما سپاسگزاریم\r\n                            </p>\r\n                        </div>\r\n                    </template>\r\n                    <div v-else class=\"text-center alert alert-info mb-0\">\r\n                        اطلاعاتی برای نمایش پیدا نشد\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script setup>\r\nimport homeApi from '@/axios/api'\r\nimport { ref, computed } from 'vue'\r\nimport { useHead } from '@vueuse/head'\r\nlet loading = ref(false)\r\nimport { useRoute } from 'vue-router';\r\nconst route = useRoute();\r\nimport { useToast } from \"vue-toastification\";\r\nconst toast = useToast();\r\nlet factor = ref({})\r\nlet user = ref({})\r\nasync function getFactor() {\r\n    try {\r\n        loading.value = true\r\n        let url = 'payments/factors/' + route.params.number\r\n\r\n        const response = await homeApi.get(url);\r\n        if (response.data.status) {\r\n            factor.value = response.data.factor\r\n            user.value = response.data.user\r\n            useHead({\r\n                // Can be static or computed\r\n                title: computed(() => `پرداخت فاکتور شماره - ${factor.number}`),\r\n            })\r\n        } else {\r\n            toast.warning(response.data.message, {\r\n                timeout: 2000\r\n            });\r\n        }\r\n    } catch (err) {\r\n        toast.error(err.response.data.message, {\r\n            timeout: 2000\r\n        });\r\n\r\n    } finally{\r\n        loading.value = false\r\n    }\r\n}\r\ngetFactor()\r\nasync function payment() {\r\n    try {\r\n        loading.value = true\r\n        let url = 'payments/factors/' + route.params.number\r\n\r\n        const response = await homeApi.post(url);\r\n        if (response.data.status) {\r\n            if (response.data.type == 'wallet') {\r\n                factor.value = response.data.factor\r\n                toast.success(response.data.message, {\r\n                    timeout: 2000\r\n                });\r\n            } else {\r\n                location.assign(response.data.url)\r\n            }\r\n        } else {\r\n            console.log(response.data)\r\n            toast.warning(response.data.message, {\r\n                timeout: 2000\r\n            });\r\n        }\r\n    } catch (err) {\r\n        toast.error(err.response.data.message, {\r\n            timeout: 2000\r\n        });\r\n\r\n    } finally {\r\n        loading.value = false\r\n    }\r\n}\r\n</script>","import script from \"./PaymentFactor.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PaymentFactor.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["loading","ref","route","useRoute","toast","useToast","factor","user","async","getFactor","value","url","params","number","response","homeApi","get","data","status","useHead","title","computed","warning","message","timeout","err","error","payment","post","type","success","location","assign","console","log","__exports__"],"sourceRoot":""}