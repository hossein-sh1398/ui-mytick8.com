{"version":3,"file":"js/717.f0197cdf.js","mappings":"ktEAuGA,MAAMA,GAAYC,EAAAA,EAAAA,KACZC,GAAQC,EAAAA,EAAAA,MACRC,EAAUC,2BAChB,IAAIC,GAAaC,EAAAA,EAAAA,IAAS,CAAC,GACvBC,GAAeD,EAAAA,EAAAA,IAAS,CAAC,GACzBE,GAAUC,EAAAA,EAAAA,KAAI,GACdC,GAAaD,EAAAA,EAAAA,MACbE,GAAWF,EAAAA,EAAAA,MAcfG,eAAeC,IACXL,EAAQM,OAAQ,EAChB,IACI,IAAIC,EAAO,oBACPL,EAAWI,QACXC,GAAO,eAAiBL,EAAWI,OAEnCH,EAASG,QACLJ,EAAWI,MACXC,GAAO,aAAeJ,EAASG,MAE/BC,GAAO,aAAeJ,EAASG,OAGvC,MAAME,QAAiBC,EAAAA,EAASC,IAAIH,GACR,WAAxBC,EAASG,KAAKC,SACdb,EAAeS,EAASG,KAAKA,KAAKZ,aAClCF,EAAaW,EAASG,KAAKA,KAAKd,WAExC,CAAE,MAAOgB,GACLpB,EAAMqB,OAAMC,EAAAA,EAAAA,IAAYF,GAAKG,KAAK,KAAM,CACpCC,QAAS,KAEjB,CAAE,QACEjB,EAAQM,OAAQ,CACpB,CACJ,C,OAtCAY,EAAAA,EAAAA,GAAQ,CAEJC,OAAOC,EAAAA,EAAAA,KAAS,IAAO,GAAE7B,EAAU8B,QAAQC,QAAQ/B,EAAU8B,QAAQE,sBAEzEC,iBAAiBC,WAAW,CACxBC,MAAM,EACNC,eAAgB,CACZC,KAAM,IACNF,KAAM,IACNG,QAAS,OA8BjBxB,I,k7ECpJA,MAAMyB,EAAc,EAEpB,O","sources":["webpack://vuejs_mytick8.com/./src/components/users/Orders.vue","webpack://vuejs_mytick8.com/./src/components/users/Orders.vue?e4a5"],"sourcesContent":["<template>\r\n    <div class=\"d-flex justify-content-center\" v-if=\"loading\">\r\n        <div class=\"spinner-border spinner-border-sm\">\r\n        </div>\r\n    </div>\r\n    <div v-else>\r\n        <div id=\"panel__records\">\r\n            <form class=\"panel__records--form\">\r\n                <div class=\"row justify-content-center align-items-center\">\r\n                    <div class=\"form__control col-sm-4 mb-sm-0 mb-2\">\r\n                        <input type=\"text\" id=\"date--start\" v-model=\"start_date\" data-jdp\r\n                            class=\"form__control-input text-center w-100\" placeholder=\"از تاریخ\">\r\n                    </div>\r\n                    <div class=\"form__control col-sm-4 mb-sm-0 mb-2\">\r\n                        <input type=\"text\" id=\"date--end\" v-model=\"end_date\" data-jdp\r\n                            class=\"form__control-input text-center w-100\" placeholder=\"تا تاریخ\">\r\n                    </div>\r\n                    <div class=\"col-sm-4\">\r\n                        <button type=\"submit\" @click.prevent=\"index()\" id=\"panel__records--submit\"\r\n                            class=\"form__control-submit w-100 d-flex justify-content-center align-items-center\">\r\n                            <img src=\"../../assets/images/Search-white.svg\" alt=\"\" class=\"me-3\" width=\"15px\"\r\n                                height=\"15px\">\r\n                            جست و جو\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n            <div class=\"records-active pt-4 mt-4 border-top\">\r\n                <div class=\"records-wrapper__header d-flex flex-wrap align-items-center mb-3\">\r\n                    <img src=\"../../assets/images/ticket2.svg\" alt=\"\" class=\"records-wrapper__header--icon me-3\"\r\n                        width=\"24px\" height=\"26px\">\r\n                    <h3 class=\"records-wrapper__header--text\">بلیت فعال</h3>\r\n                </div>\r\n                <ul class=\"records-wrapper__list d-flex flex-column justify-content-start align-items-start\">\r\n                    <li v-for=\"activeOrder in activeOrders\" :key=\"activeOrder.id\"\r\n                        class=\"records-wrapper__item d-flex flex-wrap justify-content-start align-items-center\">\r\n                        <div class=\"records-wrapper__img-wrapper d-flex justify-content-center align-items-start\">\r\n                            <img :src=\"baseUrl + activeOrder.program.photo\" alt=\"\" class=\"records-wrapper--img\"\r\n                                width=\"86px\" height=\"112px\">\r\n                        </div>\r\n                        <div\r\n                            class=\"records-wrapper__col d-flex flex-sm-row flex-column justify-content-sm-between align-items-sm-center\">\r\n                            <div class=\"records-wrapper__info\">\r\n                                <h3 class=\"records-wrapper__info--title\">{{ activeOrder.program.artist.name + ' ' +\r\n                                    activeOrder.program.artist.family }}</h3>\r\n                                <p class=\"records-wrapper__info--date\">{{ activeOrder.program.run_date.split(' ')[0] }}\r\n                                </p>\r\n                                <p class=\"records-wrapper__info--location\">\r\n                                    {{ activeOrder.program.hall.hall_name }}\r\n                                </p>\r\n                                <p class=\"records-wrapper__info--ticket-no\">تعداد بلیط: {{ activeOrder.tickets_count }}\r\n                                </p>\r\n                            </div>\r\n                            <div class=\"records-wrapper__status ms-sm-auto\">\r\n                                <span class=\"records-wrapper__status--span ms-md-auto mb-4\">فعال</span>\r\n                                <router-link :to=\"{\r\n                                    name: 'show.ticket', params: {\r\n                                        program_id: activeOrder.program.id,\r\n                                        san_id: activeOrder.san.id,\r\n                                        order_id: activeOrder.id,\r\n                                    }\r\n                                }\" class=\"records-wrapper__status--btn\">مشاهده بلیت</router-link>\r\n                            </div>\r\n                        </div>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n            <div class=\"records-deactive pt-4 mt-4\">\r\n                <ul class=\"records-wrapper__list\">\r\n                    <li v-for=\"heldOrder in heldOrders\" :key=\"heldOrder.id\"\r\n                        class=\"records-wrapper__item d-flex flex-wrap justify-content-start align-items-center\">\r\n                        <div class=\"records-wrapper__img-wrapper d-flex justify-content-center align-items-start\">\r\n                            <img :src=\"baseUrl + heldOrder.program.photo\" alt=\"\" class=\"records-wrapper--img\"\r\n                                width=\"86px\" height=\"112px\">\r\n                        </div>\r\n                        <div\r\n                            class=\"records-wrapper__col d-flex flex-wrap flex-sm-row flex-column justify-content-sm-between align-items-sm-center\">\r\n                            <div class=\"records-wrapper__info\">\r\n                                <h3 class=\"records-wrapper__info--title\">{{ heldOrder.program.artist.name + ' ' +\r\n                                    heldOrder.program.artist.family }}</h3>\r\n                                <p class=\"records-wrapper__info--date\">{{ heldOrder.program.run_date.split(' ')[0] }}\r\n                                </p>\r\n                                <p class=\"records-wrapper__info--location\">{{ heldOrder.program.hall.hall_name }}</p>\r\n                                <p class=\"records-wrapper__info--ticket-no\">تعداد بلیط: {{ heldOrder.tickets_count }}\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script setup>\r\n\r\nimport { ref, reactive, computed } from \"vue\";\r\nimport { useToast } from \"vue-toastification\";\r\nimport usersApi from '@/axios/api'\r\nimport '../../assets/css/jalalidatepicker.min.css'\r\nimport '../../assets/js/jalalidatepicker.min.js'\r\nimport { useHead } from '@vueuse/head'\r\nimport { useUserStore } from '../../store/user'\r\nimport { handleError } from \"@/utils/helpers\";\r\nconst userStore = useUserStore()\r\nconst toast = useToast();\r\nconst baseUrl = process.env.VUE_APP_BASE_URL\r\nlet heldOrders = reactive({})\r\nlet activeOrders = reactive({})\r\nlet loading = ref(true)\r\nlet start_date = ref()\r\nlet end_date = ref()\r\n\r\nuseHead({\r\n    // Can be static or computed\r\n    title: computed(() => `${userStore.getUser.name} ${userStore.getUser.family}- سفارشات`),\r\n})\r\njalaliDatepicker.startWatch({\r\n    time: false,\r\n    separatorChars: {\r\n        date: \"-\",\r\n        time: \":\",\r\n        between: \" \"\r\n    }\r\n});\r\nasync function index() {\r\n    loading.value = true;\r\n    try {\r\n        let url = `user/panel/orders`;\r\n        if (start_date.value) {\r\n            url += \"?start_date=\" + start_date.value;\r\n        }\r\n        if (end_date.value) {\r\n            if (start_date.value) {\r\n                url += \"&end_date=\" + end_date.value;\r\n            } else {\r\n                url += \"?end_date=\" + end_date.value;\r\n            }\r\n        }\r\n        const response = await usersApi.get(url);\r\n        if (response.data.status == 'success') {\r\n            activeOrders = response.data.data.activeOrders\r\n            heldOrders = response.data.data.heldOrders\r\n        }\r\n    } catch (err) {\r\n        toast.error(handleError(err).join(' '), {\r\n            timeout: 2000\r\n        });\r\n    } finally {\r\n        loading.value = false\r\n    }\r\n}\r\nindex()\r\n</script>","import script from \"./Orders.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Orders.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["userStore","useUserStore","toast","useToast","baseUrl","process","heldOrders","reactive","activeOrders","loading","ref","start_date","end_date","async","index","value","url","response","usersApi","get","data","status","err","error","handleError","join","timeout","useHead","title","computed","getUser","name","family","jalaliDatepicker","startWatch","time","separatorChars","date","between","__exports__"],"sourceRoot":""}