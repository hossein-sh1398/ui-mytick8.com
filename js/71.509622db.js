"use strict";(self["webpackChunkvuejs_mytick8_com"]=self["webpackChunkvuejs_mytick8_com"]||[]).push([[71],{9063:function(t,e,a){a.d(e,{Z:function(){return d}});var s=a(6252),i=a(3577);const r={id:"breadcrumb",class:"my-4 pb-3"},l={class:"container"},c={class:"breadcrumb"},n={class:"breadcrumb-item"},o={key:0,class:"breadcrumb-item active","aria-current":"page"};var m={__name:"Breadcrumb",props:["program"],setup(t){return(e,a)=>{const m=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",r,[(0,s._)("div",l,[(0,s._)("nav",null,[(0,s._)("ol",c,[(0,s._)("li",n,[(0,s.Wm)(m,{to:{name:"home"}},{default:(0,s.w5)((()=>[(0,s.Uk)("برنامه ها")])),_:1})]),t.program?((0,s.wg)(),(0,s.iD)("li",o,(0,i.zw)(t.program.artist.name+" "+t.program.artist.family),1)):(0,s.kq)("",!0)])])])])}}};const p=m;var d=p},2216:function(t,e,a){a.r(e),a.d(e,{default:function(){return $t}});a(560);var s=a(6252),i=a(2262),r=a.p+"img/maximize_full screen_zoom_expand_icon.d30db831.svg",l=a(2201),c=a(2496),n=a(7853),o=a(5925),m=a(3465),p=a(3577),d=a.p+"img/chair-default.c7691605.svg",_=a.p+"img/receipt-item.eaf22e76.svg",u=a.p+"img/chair-5.bef96372.svg",g=a.p+"img/chair-4.db0c2100.svg",v=a.p+"img/chair-3.78ac53ab.svg",h=a.p+"img/chair-2.58c38a57.svg",k=a.p+"img/chair-1.b591510a.svg";const b={class:"row align-items-center mb-4"},y={class:"select-chair__receipt-list col-md-6 nav justify-content-lg-around justify-content-sm-start justify-content-center mb-md-0 mb-3"},f={class:"r d-flex justify-content-start align-items-center mb-lg-0 mb-2"},w=(0,s._)("img",{src:d,alt:"",class:"me-2"},null,-1),x=(0,s._)("p",{class:"select-chair__receipt-item--p me-1"},"تعداد صندلی های انتخاب شده:",-1),L={class:"select-chair__receipt-item--span total-chair-length"},D={class:"select-chair__receipt-item d-flex justify-content-start align-items-center mb-lg-0 mb-2"},S=(0,s._)("img",{src:_,alt:"",class:"me-2"},null,-1),j=(0,s._)("p",{class:"select-chair__receipt-item--p"},"مبلغ کل:",-1),C={class:"select-chair__receipt-item--span total-price mx-1"},U=(0,s._)("span",null,"تومان",-1),T=(0,s.uE)('<ul class="select-chair__info-list col-md-6 nav justify-content-sm-between justify-content-center"><li class="select-chair__info-item d-flex justify-content-start align-items-center mb-lg-0 mb-2"><img src="'+u+'" alt="" class="me-1"><p class="select-chair__receipt-item--p">فروخته شده</p></li><li class="select-chair__info-item d-flex justify-content-start align-items-center mb-lg-0 mb-2"><img src="'+g+'" alt="" class="me-1"><p class="select-chair__receipt-item--p">قابل خرید</p></li><li class="select-chair__info-item d-flex justify-content-start align-items-center mb-lg-0 mb-2"><img src="'+v+'" alt="" class="me-1"><p class="select-chair__receipt-item--p">انتخاب شما</p></li><li class="select-chair__info-item d-flex justify-content-start align-items-center mb-lg-0 mb-2"><img src="'+h+'" alt="" class="me-1"><p class="select-chair__receipt-item--p">رزرو</p></li><li class="select-chair__info-item d-flex justify-content-start align-items-center mb-lg-0 mb-2"><img src="'+k+'" alt="" class="me-1"><p class="select-chair__receipt-item--p">غیرقابل خرید</p></li></ul>',1);var H={__name:"SelectChairReceiptItem",setup(t){const e=(0,o.x)();let a=(0,s.Fl)((()=>e.getCount));return(t,r)=>((0,s.wg)(),(0,s.iD)("div",b,[(0,s._)("ul",y,[(0,s._)("li",f,[w,x,(0,s._)("span",L,(0,p.zw)((0,i.SU)(a)),1)]),(0,s._)("li",D,[S,j,(0,s._)("span",C,(0,p.zw)((0,i.SU)(e).getTotal.toLocaleString()),1),U])]),T]))}};const z=H;var I=z,B=a(9063);const Z={id:"buy-process",class:"my-5"},E={class:"nav justify-content-md-evenly justify-content-center align-items-center"},M={class:"nav-item buy-process__item col active"},q=(0,s._)("div",{class:"buy-process--shape"},[(0,s._)("span",{class:"buy-process--shape-num"},"1")],-1),V=(0,s._)("p",{class:"buy-process--text"},"انتخاب سانس",-1),F=(0,s.uE)('<li class="nav-item buy-process__item col active"><div class="nav-link buy-process__link px-sm-3 px-2"><div class="buy-process--shape"><span class="buy-process--shape-num">2</span></div><p class="buy-process--text">انتخاب صندلی</p></div></li><li class="nav-item buy-process__item col"><div class="nav-link buy-process__link px-sm-3 px-2"><div class="buy-process--shape"><span class="buy-process--shape-num">3</span></div><p class="buy-process--text">تکمیل اطلاعات</p></div></li><li class="nav-item buy-process__item col"><div class="nav-link buy-process__link px-sm-3 px-2" href="#"><div class="buy-process--shape"><span class="buy-process--shape-num">4</span></div><p class="buy-process--text">پرداخت</p></div></li><li class="nav-item buy-process__item col"><div class="nav-link buy-process__link px-sm-3 px-2" href="#"><div class="buy-process--shape"><span class="buy-process--shape-num">5</span></div><p class="buy-process--text">دریافت بلیت</p></div></li>',4);var W={__name:"ChairBuyProcess",props:["program_id"],setup(t){return(e,a)=>{const i=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",Z,[(0,s._)("ul",E,[(0,s._)("li",M,[(0,s.Wm)(i,{to:{name:"select_time",params:{id:t.program_id}},class:"nav-link buy-process__link px-sm-3 px-2"},{default:(0,s.w5)((()=>[q,V])),_:1},8,["to"])]),F])])}}};const Y=W;var R=Y,K=a(1602);const P=["data-i","data-p","title"];var A={__name:"Chair",props:["row","chair","hall_name","program_id","san_id","position","startDateTime","startDate","ticket","privateBlockTicketIds","privateBlockIsValid"],setup(t){const e=(0,l.yj)(),a=t,r=(0,o.x)();async function c(t){const s=a.ticket.id,i=`/programs/${a.program_id}/sans/${a.san_id}/chairs/${s}/remove-from-cart`,l=`/programs/${a.program_id}/sans/${a.san_id}/chairs/${s}/add-to-cart`;let c="",o='<div class="spinner-border spinner-border-sm-seat"></div>';if(t.target.classList.contains("hall__seat")&&!t.target.classList.contains("hall__seat--occupied")&&!t.target.classList.contains("hall__seat--reserved")&&!t.target.classList.contains("hall__seat--blocked")&&!t.target.classList.contains("hall__seat--notexist")){let p=t.target.classList.contains("hall__seat--selected");if(p){t.target.classList.add("clicked"),t.target.classList.add("seat-size"),t.target.classList.remove("hall__seat"),t.target.classList.remove("hall__seat--selected"),c=t.target.innerHTML,t.target.innerHTML=o;try{const e=await K.Z.get(i);"success"==e.data.status&&(t.target.classList.remove("clicked"),t.target.classList.add("hall__seat"),t.target.classList.remove("seat-size"),t.target.innerHTML=c,r.removeSeatFromCart(s),setTimeout((()=>{t.target.classList.remove("hall__seat--reserved")}),200))}catch(m){t.target.classList.add("hall__seat"),t.target.classList.remove("seat-size"),t.target.classList.remove("clicked"),t.target.innerHTML=c,toast.error((0,n.S3)(m).join(", "),{timeout:2e3})}}else{if(r.getCount>=10)return toast.warning("خرید بیشتر از 10 بلیت امکان پذیر نیست",{timeout:2e3}),!1;try{t.target.classList.add("clicked"),t.target.classList.add("seat-size"),t.target.classList.remove("hall__seat"),c=t.target.innerHTML,t.target.innerHTML=o;const p=await K.Z.get(l);"success"==p.data.status&&(t.target.classList.add("hall__seat"),t.target.classList.remove("seat-size"),t.target.innerHTML=c,setTimeout((()=>{t.target.classList.remove("hall__seat--reserved")}),600),t.target.classList.add("hall__seat--selected"),r.addSeatToCart({id:a.ticket.id,price:a.ticket.price,row:a.row.number,index:a.chair.index,group:a.position.type_title,position:a.position.title}),setTimeout((async()=>{if(console.log(t.target.title),t.target.classList.contains("hall__seat--selected")&&"seats"==e.name)try{const e=await K.Z.get(i);"success"==e.data.status&&(t.target.classList.remove("hall__seat--selected"),t.target.classList.remove("clicked"),t.target.classList.remove("seat-size"),r.removeSeatFromCart(s))}catch(m){t.target.classList.add("hall__seat"),t.target.classList.remove("seat-size"),t.target.classList.remove("clicked"),toast.error((0,n.S3)(m).join(", "),{timeout:2e3})}}),2e4))}catch(m){t.target.classList.add("hall__seat"),t.target.classList.remove("seat-size"),t.target.classList.remove("clicked"),t.target.innerHTML=c,toast.error((0,n.S3)(m).join(""),{timeout:2e3})}}}}return(e,a)=>((0,s.wg)(),(0,s.iD)("div",{"data-i":["available","reservation"].includes(t.ticket.status)?t.ticket.id:"","data-p":["available"].includes(t.ticket.status)?t.ticket.price:"",style:(0,p.j5)([t.chair.rotate?{rotate:t.chair.rotate+"deg"}:"",t.chair.margin?{marginRight:t.chair.margin+"px"}:""]),class:(0,p.C_)(["hall__seat",{"hall__seat--selected":(0,i.SU)(r).hasCart(t.ticket.id),"hall__seat--occupied":"sold"==t.ticket.status,"hall__seat--blocked":"blocked"==t.ticket.status,"hall__seat--reserved":"reservation"==t.ticket.status&&!(0,i.SU)(r).hasCart(t.ticket.id)}]),onClick:a[0]||(a[0]=t=>c(t)),title:"sold"==t.ticket.status?"فروخته شده":"blocked"==t.ticket.status?"غیر قابل فروش":"reservation"!=t.ticket.status||(0,i.SU)(r).hasCart(t.ticket.id)?`قیمت بلیت: ${t.ticket.price.toLocaleString()} تومان \n شماره صندلی:${t.chair.index} \n ردیف:${t.row.number}\n  جایگاه:${t.position.title}\n موقعیت: ${t.position.type_title} \n ساعت:${t.startDateTime}\n روز:${t.startDate}            _name}`:"رزرو شده"},(0,p.zw)(t.chair.index),15,P))}};const O=A;var G=O;const J={class:"hall__row-num hall__row-num--right"},N={key:1,class:"hall__seat hall__seat--notexist"},Q={class:"hall__row-num hall__row-num--left"},X={key:1,class:"d-flex justify-content-center align-items-center position-relative",style:{height:"23px"}};var tt={__name:"Position",props:["program","san_id","position","startDateTime","startDate","tickets","privateBlockTicketIds","privateBlockIsValid"],setup(t){return(0,s.bv)((()=>{})),(e,a)=>((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.position.rows,((e,a)=>((0,s.wg)(),(0,s.iD)(s.HY,{key:a},[e.row.is_active?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,p.C_)(["d-flex justify-content-center align-items-center position-relative",{"flex-row-reverse":"ltr"==t.position.direction}]),style:(0,p.j5)([e.row.margin?{marginRight:e.row.margin+"px"}:""])},[(0,s._)("div",J,[(0,s._)("span",null,(0,p.zw)(e.row.number),1)]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.chairs,(a=>((0,s.wg)(),(0,s.iD)(s.HY,{key:a.id},[a.is_active?((0,s.wg)(),(0,s.j4)(G,{key:0,position:t.position,row:{number:e.row.number,rotate:e.row.rotate},privateBlockIsValid:t.privateBlockIsValid,privateBlockTicketIds:t.privateBlockTicketIds,chair:a,hall_name:t.program.hall.hall_name,startDateTime:t.startDateTime,startDate:t.startDate,ticket:t.tickets[a.id],program_id:t.program.id,san_id:t.san_id},null,8,["position","row","privateBlockIsValid","privateBlockTicketIds","chair","hall_name","startDateTime","startDate","ticket","program_id","san_id"])):((0,s.wg)(),(0,s.iD)("div",N))],64)))),128)),(0,s._)("div",Q,[(0,s._)("span",null,(0,p.zw)(e.row.number),1)])],6)):((0,s.wg)(),(0,s.iD)("div",X))],64)))),128))}};const et=tt;var at=et,st=a(3002);const it={key:0,id:"select-chair"},rt={class:"container"},lt={class:"select-chair mb-5"},ct={key:0,class:"mt-5 mb-5 d-flex justify-content-center align-items-center"},nt=["src"],ot={name:"maps",style:{cursor:"pointer"}},mt=["onClick","shape","coords","alt"],pt={key:1,class:"select-chair__select"},dt={class:"select-chair__select-wrapper"},_t=(0,s.uE)('<div class="d-flex"><div class="select-chair__zoom d-flex flex-column justify-content-center align-items-center m-3" style="z-index:100;"><span class="select-chair__zoom--in">✚</span><span class="select-chair__zoom--orginal"><img src="'+r+'" alt="" width="20px" height="20px"></span><span class="select-chair__zoom--out">⚊</span></div><div class="select-chair__select--screen">استیج</div></div>',1),ut={id:"divpnlChart",class:"hall-container tab-content d-flex flex-column justify-content-center align-items-center mt-3"},gt={class:"tab-pane fade show active",id:"floor-one",role:"tabpanel"},vt={key:2,class:"d-flex justify-content-center align-items-center mt-3"},ht={key:0,class:"select-chair__select--btn btn mx-auto"},kt=(0,s._)("span",{class:"spinner-border spinner-border-sm me-2"},null,-1),bt=(0,s._)("span",null,"انتخاب",-1),yt=[kt,bt],ft=(0,s._)("span",null,"انتخاب",-1),wt=[ft];var xt={__name:"SelectChairs",setup(t){const e=(0,o.x)(),a=(0,l.yj)(),r=(0,l.tv)(),p="https://api/mytick8.com/",d=(0,st.pm)();let _=(0,i.iH)(""),u=(0,i.iH)(""),g=(0,i.iH)(""),v=(0,i.iH)(""),h=(0,i.iH)({}),k=(0,i.iH)(!1),b=(0,i.iH)([]),y=(0,i.iH)(a.params.programId),f=(0,i.iH)(a.params.sanId),w=(0,i.iH)(!1),x=(0,i.iH)(!1),L=(0,i.iH)(!1);async function D(t){try{if(L.value)return;x.value=!1,L.value=!0;let e=`/programs/${y.value}/sans/${f.value}/positions/${t}/load/chairs`;const a=await K.Z.get(e);_.value=a.data.data.position,h.value=a.data.data.tickets,x.value=!0,L.value=!1}catch(e){if(d.error((0,n.S3)(e).join(", "),{timeout:3e3}),500==e.response.status){let t=`/programs/${a.params.programId}/select/time`;r.push(t)}}}async function S(){w.value=!0;let t=`/programs/${a.params.programId}/sans/${a.params.sanId}/check/tickets/1`;const s=await(0,n.O9)(t);if("success"==s.status){let t=`/programs/${a.params.programId}/sans/${a.params.sanId}/select/info`;r.push(t)}else{for(let t of s.expiredAtTickets)e.removeSeatFromCart(t.id);w.value=!1}}return window.Echo.channel(`select-chair-channel-${y.value}-${a.params.sanId}`).listen(".select-chair-event",(t=>{t.isReserve?t.chairs.forEach((t=>{$('div[data-i="'+t+'"]').hasClass("private_block")||$('div[data-i="'+t+'"]').hasClass("clicked")||($('div[data-i="'+t+'"]').addClass("hall__seat--reserved"),$('div[data-i="'+t+'"]').attr("title","رزرو شد"))})):t.chairs.forEach((t=>{$('div[data-i="'+t+'"]').hasClass("private_block")||$('div[data-i="'+t+'"]').removeClass("hall__seat--reserved")}))})),window.Echo.channel(`sold-ticket-channel-${y.value}-${a.params.sanId}`).listen(".sold-ticket-event",(t=>{t.chairs.forEach((t=>{$('div[data-i="'+t+'"]').removeClass("hall__seat--reserved"),$('div[data-i="'+t+'"]').addClass("hall__seat--occupied"),$('div[data-i="'+t+'"]').attr("title","فروخته شد")}))})),(0,s.bv)((async()=>{try{let t=`/programs/${y.value}/sans/${f.value}/select/chairs`;const e=await K.Z.get(t);u.value=e.data.data.program,g.value=e.data.data.startDateTime,v.value=e.data.data.startDate,1===u.value.hall.positions.length&&(_.value=e.data.data.position,h.value=e.data.data.tickets,x.value=!0),(0,c.u)({title:(0,s.Fl)((()=>`${u.value.title} - ${u.value.artist.name} ${u.value.artist.family}`)),meta:[{name:"description",content:(0,s.Fl)((()=>u.value.title+" "+u.value.hall.hall_name+" "+u.value.hall.city.city_name))}]})}catch(t){if(d.error((0,n.S3)(t).join(", "),{timeout:3e3}),500==t.response.status){let t=`/programs/${a.params.programId}/select/time`;r.push(t)}}})),(t,a)=>((0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(B.Z,{program:(0,i.SU)(u)},null,8,["program"]),(0,i.SU)(u)?((0,s.wg)(),(0,s.iD)("section",it,[(0,s._)("div",rt,[(0,s.Wm)(m.Z,{program:(0,i.SU)(u)},null,8,["program"]),(0,i.SU)(u)?((0,s.wg)(),(0,s.j4)(R,{key:0,program_id:(0,i.SU)(u).id},null,8,["program_id"])):(0,s.kq)("",!0),(0,s._)("div",lt,[(0,s.Wm)(I),(0,i.SU)(u).hall.positions.length>1?((0,s.wg)(),(0,s.iD)("div",ct,[(0,s._)("img",{id:"hossein",usemap:"#maps",style:{width:"300px!important",height:"400px!important"},src:(0,i.SU)(p)+(0,i.SU)(u).hall.photo},null,8,nt),(0,s._)("map",ot,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,i.SU)(u).hall.positions,(t=>((0,s.wg)(),(0,s.iD)("area",{onClick:()=>{t.is_active?D(t.id):(0,i.SU)(d).error("موجود نیست",{timeout:3e3})},key:t.id,shape:t.shape,coords:t.coords,alt:t.id},null,8,mt)))),128))])])):(0,s.kq)("",!0),(0,i.SU)(x)?((0,s.wg)(),(0,s.iD)("div",pt,[(0,s._)("div",dt,[_t,(0,s._)("div",ut,[(0,s._)("div",gt,[(0,s.Wm)(at,{privateBlockIsValid:(0,i.SU)(k),privateBlockTicketIds:(0,i.SU)(b),startDateTime:(0,i.SU)(g),position:(0,i.SU)(_),startDate:(0,i.SU)(v),tickets:(0,i.SU)(h),program:(0,i.SU)(u),san_id:(0,i.SU)(f)},null,8,["privateBlockIsValid","privateBlockTicketIds","startDateTime","position","startDate","tickets","program","san_id"])])])])])):(0,s.kq)("",!0),(0,i.SU)(e).getCount&&(0,i.SU)(x)?((0,s.wg)(),(0,s.iD)("div",vt,[(0,i.SU)(w)?((0,s.wg)(),(0,s.iD)("button",ht,yt)):((0,s.wg)(),(0,s.iD)("button",{key:1,onClick:a[0]||(a[0]=t=>S()),class:"select-chair__select--btn btn mx-auto"},wt))])):(0,s.kq)("",!0)])])])):(0,s.kq)("",!0)],64))}};const Lt=xt;var $t=Lt},3465:function(t,e,a){a.d(e,{Z:function(){return y}});var s=a(6252),i=a(3577),r=a(2262),l=a(9101),c=a(1905);const n={class:"concert-banner"},o={key:0,class:"d-grid h-100"},m={class:"concert-banner__caption p-5"},p={class:"concert-banner__caption--title pe-2 mb-2"},d={class:"concert-banner__caption--info d-flex justify-content-start align-items-center mb-2"},_=["alt"],u={class:"concert-banner__caption--info d-flex justify-content-start align-items-center mb-2"},g=["alt"],v={class:"concert-banner__image"},h=["src","alt"];var k={__name:"Cover",props:["program"],setup(t){let e="https://api/mytick8.com/";return(a,k)=>((0,s.wg)(),(0,s.iD)("div",n,[t.program?((0,s.wg)(),(0,s.iD)("div",o,[(0,s._)("div",m,[(0,s._)("h1",p,(0,i.zw)(`${t.program.artist.name} ${t.program.artist.family}`),1),(0,s._)("p",d,[(0,s._)("img",{src:l,alt:t.program.hall.hall_name,class:"me-1",width:"25.1px",height:"25.1px"},null,8,_),(0,s.Uk)(" "+(0,i.zw)(t.program.hall.city.city_name)+" ،"+(0,i.zw)(t.program.hall.hall_name),1)]),(0,s._)("p",u,[(0,s._)("img",{src:c,alt:t.program.hall.hall_name,class:"me-1",width:"25.1px",height:"25.1px"},null,8,g),(0,s.Uk)(" "+(0,i.zw)(t.program.run_date),1)])]),(0,s._)("div",v,[(0,s._)("img",{class:"h-100",src:(0,r.SU)(e)+t.program.cover,alt:t.program.hall.hall_name},null,8,h)])])):(0,s.kq)("",!0)]))}};const b=k;var y=b},1905:function(t,e,a){t.exports=a.p+"img/ticket-calendar.824082c0.svg"},9101:function(t,e,a){t.exports=a.p+"img/ticket-location.dd5e9907.svg"}}]);
//# sourceMappingURL=71.509622db.js.map